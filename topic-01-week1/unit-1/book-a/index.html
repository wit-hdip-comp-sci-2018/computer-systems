

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.10/css/uikit.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.10/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.10/js/uikit-icons.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"/>
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <style>
    

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



  </style>

  <body class="lab">

    
  <div class="uk-offcanvas-content">
    <div id="offcanvas-usage" uk-offcanvas>
      <div class="uk-offcanvas-bar">
        <button class="uk-offcanvas-close" type="button" uk-close></button>
        <ul class="uk-nav">
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//topic-00-open-day/book-1/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Preparatory Lab
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//topic-00-open-day/book-2/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Shell Scripting
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//topic-00-open-day/book-3/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Vagrant and Sense HAT
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//unit-1/book-a/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Linux Practice Exercises
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//unit-2/book-a/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Home Network
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//unit-1/book-a/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Scripting Exercises
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//unit-2/book-1-vagrant/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Vagrant and Virtualisation
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//unit-1/book-a/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Scripting Exercises
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="http://wit-hdip-comp-sci-2018.github.io/computer-systems//unit-2/book-1-vagrant/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Vagrant and Virtualisation
                </a>
              </li>
            
          
        </ul>
      </div>
    </div>
  </div>


    <div uk-sticky>
      <nav class="uk-navbar">
        <div class="uk-navbar-left">
          <ul class="uk-subnav uk-background-secondary uk-subnav-pill">
            <li><a href="#offcanvas-usage" uk-icon="icon: menu" , uk-toggle title="Switch Lab" pos="bottom"
                   uk-tooltip></a></li>
             }}
              <li class="uk-active"><a href="../../index.html" uk-icon="icon: chevron-up" uk-toggle title="Parent Topic"
                                       pos="bottom" uk-tooltip> Linux and Shell Scripting </a></li>
            
          </ul>
        </div>
        <div class="uk-navbar-right">
          <ul class="uk-subnav uk-background-secondary uk-subnav-pill"
              uk-switcher="connect: .switcher-container">
            
              <li><a href="#">Linux Practice Exercises</a></li>
            
              <li><a href="#">01</a></li>
            
              <li><a href="#">02</a></li>
            
              <li><a href="#">03</a></li>
            
              <li><a href="#">04</a></li>
            
              <li><a href="#">Exercises</a></li>
            
          </ul>
        </div>
      </nav>
    </div>

    <div class="uk-container uk-container-expand">
      <ul class="uk-switcher switcher-container">
        
          <li> <h1>Shell Scripting</h1>
<p>Time for you to practice!</p>
<h2>What is “Shell Scripting”?</h2>
<ul>
<li>In Linux, it is sometimes necessary to perform a number of complex shell commands in order to achieve an overall goal. </li>
<li>In the situation where we have to perform a sequence of complex or repetitive shell commands, this process can be very tedious and time consuming. </li>
<li><p>The interpretative nature of the shell in Linux provides us with an alternative that helps speeds up this process. </p>
</li>
<li><p>This facility is known as <strong>“Shell Scripting”</strong> or <strong>“Shell Programming”</strong> . </p>
</li>
</ul>
<p>A script is a file containing shell commands that can interact with the user, repeat commands and make decisions. </p>
<p>To avail of this flexibility provided by “Shell Programming”, all we need to do is to:</p>
<ol>
<li>Place the shell commands (which we would normally type at the command prompt) into a file and </li>
<li>then execute the file.</li>
</ol>
</li>
        
          <li> <h1>This is a self-paced tutorial sheet for you to complete.</h1>
<h2>Examples:</h2>
<ol>
<li>Suppose we need to find out the number of logged-in users several times throughout the day:
The Linux command would be as follows:<pre><code> $ who | wc –l</code></pre>
Please note:<ul>
<li>This is the lowercase letter &quot; <strong>l</strong> &quot;, not the number &quot;1&quot; </li>
<li>Do NOT type the $ sign - this is just shorthand for the command line prompt</li>
</ul>
</li>
</ol>
<p>Note that this command is actually a combination of two commands, connected by a pipe.  </p>
<p>A pipe is used to connect the output of one command to the input of another command. The vertical bar symbol <strong>|</strong> is used to specify a pipe.  In this example, the output of who is provided as input to the <strong>wc –l</strong> command.  who lists the users currently logged on, one per line.  <strong>wc –l</strong> counts the number of lines in its input.</p>
<p>So, to avoid having to re-type this command each time we wish to find out how many users are logged in, we will create a file called <strong><em>numusers</em></strong>.</p>
<h2>Creating a Shell Scripting File</h2>
<p><strong>nano</strong> is a command-line text editor. 
<strong>gedit</strong> is a good graphical alternative</p>
<ol>
<li>We create the file<pre><code> $nano numusers</code></pre>
</li>
<li>We type in the shell command<pre><code> who | wc –l</code></pre>
</li>
<li>We save the file <pre><code> CTRL+O</code></pre>
</li>
<li>And exit the file<pre><code> CTRL+X</code></pre>
</li>
<li>To execute the commands contained in the file numusers, all you now have to do is type <strong>./numusers</strong> at the command line</li>
</ol>
<pre><code>    $ ./numusers
    bash: ./numusers: Permission denied
    $</code></pre>
<p>So what went wrong?  </p>
</li>
        
          <li> <h2>File Permissions and Re-directing output</h2>
<p>Before you can execute a program this way, you must change the file’s permissions and make it <strong>executable</strong>.   Use the <strong>chmod</strong> command to do this:</p>
<pre><code>    $ chmod +x numusers</code></pre>
<ol>
<li><p>So as the first part of this exercise, create and run the above shell script</p>
<p>You can put any commands at all inside a file, make the file executable, and then execute its contents simply by typing it name to the shell. It’s that simple and that powerful.</p>
</li>
<li><p>As an extension to the script above, use the shell script in conjunction with the file re-direction operator to redirect the output to a file called “<strong><em>howmany</em></strong>”; i.e.</p>
<pre><code> $ ./numusers &gt; howmany</code></pre>
</li>
<li><p>To see what has been written to the howmany file, enter</p>
<pre><code>  $ cat howmany</code></pre>
</li>
</ol>
</li>
        
          <li> <h1>Example 2</h1>
<p>For the next example suppose you want to write a shell program called <code>stats</code> that printed the date and time, the number of users logged in, and your current working directory. You know that the three command sequences you need to get this information are: </p>
<pre><code>date, who | wc –l, and pwd.</code></pre>
<pre><code>$ nano stats
   Enter the lines:
   date
   who | wc –l
   pwd
$ chmod +x stats
$ ./stats
   Thu May 15 14:12:23 IST 2014
   3
   /home/jbloggs/
$</code></pre>
<p>To make the output of this script a bit more user friendly we can add some text to the script, to appear at certain points of the programs execution. This functionality is achieved through the use of the shell command <code>echo</code>. 
Add the following lines to your <code>stats</code> program </p>
<pre><code>$ nano stats
  echo The current time and date is:
  date
  echo
  echo The number of users on the system is: 
  who | wc –l
  echo
  echo Your current working directory is:
  pwd
$ ./stats
……….</code></pre>
</li>
        
          <li> <h1>COMMENTS</h1>
<p>The Shell Programming language would not be complete without a <strong><em># comment statement</em></strong>. A comment statement allows you to insert remarks or comments about your program without it having any effect on its execution. Whenever the shell encounters the special character # at the beginning of a word or line, it takes whatever characters following the # as comments and simply ignores them; e.g.</p>
<pre><code># Author: C Cahill
# Program Description:
# This program calculates the amount of CPU usage of each user ………</code></pre>
<p>Comments are useful for documenting commands or sequences of commands whose purpose may not be obvious. </p>
<h1>VARIABLES</h1>
<p>Like virtually all programming languages, the shell allows you to store values into <strong><em>variables</em></strong>.<br><em>N.B. do not use spaces</em></p>
<p><code>variable_name=value</code></p>
<pre><code>$ count=1</code></pre>
<p>To assign the value <code>/home/username/bin</code> to the variable <code>mybin</code>, you simply write </p>
<pre><code>$ mybin=/home/username/bin</code></pre>
<p><strong><em>NOTE: (replace username with your user name)</em></strong></p>
<p>Two points are worth noting at this stage:</p>
<ol>
<li><p>Spaces are <strong>not</strong> permitted on either side of the equals sign (as mentioned above)</p>
</li>
<li><p>Unlike most programming languages the shell has no concept of data types. Whenever you assign a value to a shell variable, no matter what it is the shell simply interprets that value as a string of characters. So when we stored the value 1 into the shell variable count above, the shell made no distinction whatsoever that an integer value was being stored in the variable.</p>
</li>
</ol>
<h1>Displaying the values of Variables</h1>
<p>Using the echo command encountered above, we can display the value stored in a shell variable as follows:</p>
<pre><code>echo $variable_name</code></pre>
<p>The shell recognises the <strong>$</strong> as a special character, if a valid variable name follows the $ the shell understands that it is to substitute the value in place of the variable name.</p>
<pre><code>$ echo $count
$ echo $mybin</code></pre>
<h1>Program input</h1>
<p>Using the read command allows us to get input form the user into a variable:</p>
<p><strong><em>read variable_name</em></strong><br>(note no $ sign before variable name)</p>
<pre><code>$ read number
365    (entered by user)
$ echo $number
365    (output)</code></pre>
</li>
        
          <li> <h1>Exercises</h1>
<p>Please complete the following file in your own time</p>
<ul>
<li><a href="./archives/archive.zip">Scripting Exercises</a></li>
</ul>
<p>The above file will introduce you to concepts that you should be familiar with:</p>
<ol>
<li>Arithmetic</li>
<li>IF statements</li>
<li>WHILE and FOR loops</li>
<li>plus links to very useful online resources</li>
</ol>
</li>
        
      </ul>
    </div>

    <script>
      $(document).ready(function() {
  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass('');
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass('uk-label uk-text-lowercase');
      divLabel.append($images[i].alt);
      $(divLabel).insertAfter($images[i]);
      $('<br>').insertAfter($images[i]);
    }
  });
});

    </script>
  </body>
</html>